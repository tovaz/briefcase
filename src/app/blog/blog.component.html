<div class="content" appAnimatedBackground backgroundStyle="code" [backgroundOpacity]="0.1">
  <!-- Filter Toolbar -->
  <div class="filter-toolbar mat-elevation-z4">
    <mat-toolbar>
      <button mat-button [matMenuTriggerFor]="categoriesMenu" class="filter-button">
        <mat-icon>category</mat-icon>
        <span class="fx-hide-lt-sm">Category: </span>
        <span class="filter-value">{{ selectedCat.name }}</span>
      </button>
      <button mat-button [matMenuTriggerFor]="technologiesMenu" class="filter-button">
        <mat-icon>code</mat-icon>
        <span class="fx-hide-lt-sm">Tech: </span>
        <span class="filter-value">{{ selectedTech.name }}</span>
      </button>

      <mat-menu #categoriesMenu="matMenu">
        <button mat-menu-item *ngFor="let cat of categories"
        (click)="filter(cat, null)" [class.active]="cat.id == selectedCat.id"
        >
          {{ cat.name }}
        </button>
      </mat-menu>

      <mat-menu #technologiesMenu="matMenu">
        <button mat-menu-item *ngFor="let tech of technologies"
        (click)="filter(null, tech)" [class.active]="tech.id == selectedTech.id"
        >
        {{ tech.name }}
        </button>
      </mat-menu>

      <div style="flex: 1 1 auto;"></div>

      <div class="search fx-flex-sm-25 fx-flex-xs-100">
        <mat-icon class="search-icon">search</mat-icon>
        <input matInput type="text" [(ngModel)]="searchTerm"
        placeholder="Search posts..." (keydown.enter)="filter(selectedCat, selectedTech)"
        [class.clear]="searchTerm!=''">
        <button *ngIf="searchTerm!=''" matSuffix mat-icon-button aria-label="Clear" (click)="searchTerm=''; filter(selectedCat, selectedTech)" class="clear-button">
          <mat-icon>close</mat-icon>
        </button>
      </div>
    </mat-toolbar>
  </div>

  <div class="blog-container hide-on-init" animateOnScroll animationName="animated fadeIn">
    <!-- Header Section -->
    <div class="blog-header fx-column fx-center" style="margin-top: 20px">
      <div class="fx-flex-100" style="text-align: center;">
        <h1>My Blog</h1>
        <h4>Explore articles about web development, design, and technology</h4>
      </div>
    </div>

    <!-- Empty State -->
    <div *ngIf="posts?.length == 0" class="empty-state fx-column fx-center fx-gap-24">
      <div class="empty-icon-wrapper">
        <svg-icon src="assets/images/not-found.svg" [svgStyle]="{ 'width.px':80, 'fill':'var(--primary)', 'height.px':80 }"></svg-icon>
      </div>
      <div class="fx-column fx-center fx-gap-8">
        <h3>No posts found</h3>
        <p>Try adjusting your filters or search term</p>
      </div>
    </div>

    <!-- Posts Grid -->
    <div class="posts-grid" *ngIf="posts?.length > 0">
      <mat-card *ngFor="let post of posts; let i = index"
        matRipple
        class="post-card mat-elevation-z3 hide-on-init"
        (click)="openPost(post)"
        animateOnScroll
        animationName="animated zoomIn"
        [offset]="-50"
        appCursorGlow
        glowColor="0, 150, 136"
        [glowIntensity]="0.15"
        [glowSize]="250">

        <!-- Card Image with Overlay -->
        <div class="card-image-wrapper">
          <img mat-card-image [src]="url + post.imageCover.url" alt="{{ post.title }}" class="card-img" />
          <div class="image-overlay">
            <span class="category-badge">{{ post.category.name }}</span>
          </div>
        </div>

        <!-- Card Content -->
        <mat-card-content class="card-content">
          <h2 class="post-title">{{ post.title }}</h2>
          <div [innerHtml]="post.shortContent" class="post-excerpt"></div>

          <div class="card-footer">
            <div class="post-meta">
              <mat-icon class="meta-icon">schedule</mat-icon>
              <span class="post-date">{{ post.published_at | date : 'MMM d, yyyy' }}</span>
            </div>
            <mat-icon class="read-more-icon">arrow_forward</mat-icon>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>

